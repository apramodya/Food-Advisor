## Food Finder main-branch workflow


workflows:
    ios-app:
        name: iOS App
        environment:
            vars:
                XCODE_WORKSPACE: "Food Advisor.xcworkspace"
                XCODE_SCHEME: "Food Advisor"
                DEV_CERTIFICATE: Encrypted(Z0FBQUFBQmY1S1U2TE81N2NoN0hkMEFmdFgwMUF4c2RiSUJEUm1uajZaQ09MRE1EZlhzeE9fOS1CQko1QURlRzYyY2tSY25zVVJlb3lGZEZDVmZURVpGOVVhaXpMeE92SFNjRzQ1eXBEZ3RNbXRBaG9Bd2RWY25PUUwtS0dJTGJjRnNXYTFmV1dmZ2NSUVpMd05TM21OZzFpZUZVUzZnQ0g2UTk5TW10c3pVNTlsY3ZsbG9EWHZNNWZBcGtRb0xTbmE5T3QxWF8xcmxNTHVMZ25RQThqbG5TTDhoOVVYWVBxc083VTNFWjYxVXRsa1hIblljMkJ3b0d6NzlldGZtejdJajlXX0szc21fWV85amJWVDhWaFNFVXotcnF0QVVzcGtGOFRWX2dEcWFtbC1kNEd3cmJhY24xdVdxOTROMkdwUngzZUZkQ3d1ckVHQmN4UkJsWEt0WHZ3TDlKUXQyWWpneWhrYzJGOGVZbU52NE1VUGtyczc5azVTellqQTdGQ0lpNDZWaXRfNDlzY2xRMXVMbHFVQXFOZ2x2eFVHYXNRSmh3NmZoTmhJczhKR2tJMl9yc21oVjlCSXhWUDJ5LWNvQUdCQXR0dWd5N2pNWW5ITzdKall2MEd1UVYxaThPZm9EM3BjNVdVejhpZlZjb2o5N3pqQXQ4eVBiZk1mQlVMWnFuc2FDXzhDWFpfY0lzLVBrZ1ByQXZfSVpReDJMNXZ0aHdpOFlUeHU4dzFZbkI2R1lQTFJEc1NCSDNpOGh6TWZzTHVBTDVqaUFJOXR2RW1YaHRHc0Y3ZmF6a3JGU3BNWU4zdW80ZjVVNHp2ZVM0YmltdjRtYnFPZW4yd0d4VTFWWUhSV2VzUzdBM1M2eVVzY3hzU19jOHlfVk5UVVZhSnhfQnY1MEU2bGttU2NuUGtwakJEYm42eUY4dFpjNFYycGlDNjJYdVJyVE5pV1FDZGZoemFqbUo0YWdORGlMZjZuR2xQbUZzdnEzUy1GWU5LS25hWWU4cy0zak93ajRvQWJkTE1xUmNNQ2xNUURsdWppYUUwMUVwYTYxRlpaS1MzT1pvWk0tZjhZNU1JU3U5TFNXQkROOE14SUM2OVFSd2RjU3RIUm1ZRnVQaklRQUhWNGRIcnA3SS15NnZxNFdhWkk1Q2tBdkpSanBkakRyUmxuaEQ5NlU3WEtWU3JQN3d1Vk5iNHZhS3ozbVJnSGFDNnBYSGg4QkY3blZfdTFPYXZ0TzNXWGZEb0NPUm1ZVW9uanBUR3ZDNUNXa1VHbXlRTi1nZm5sYm9jU0lNUVplc2dHRDNCRTZKU3VDS2RTN3I0a3oyWHhpTlJRSU9XenVHNGY5SVdUQmNaTEtnWnppVWt6V0M1SlhYbDhYUV9PWlFseFI5QTExdFlwNkFqUjMwT19KcFpfOHN3S3FxWE16VWJSVnpZYi1VZ2VCbWJGQndXWlFfVG5LRXg1ZGVzamNUbV9nVkV2NFFNOEVRM0dHdFFQdXFkWXVlZXVZaDBacmdTTHRNVzY0MEZVdVo1VXVzT2FpbGFUS3o3N040U2ZiTVBMTEpVMldYM2F5Qml5Tm9vSGVmUFBITlgyTE5iUEhjWVQybUpDeVRsQVZDd0FBVTdxZTBuUkp1dGNmSGt0VU9LZDNZcDMyVURqa3UtSDVZM1ZZYlBOQ1FpdXA2eE04akw4TGthMndKb0dQSDNjZGhSdzZ6UEk1NmFhZWVuLUdfYUZlQmJ0aEdkTkt6Uk5lV2dWa3lmMjVrVk1uRldfZ2VWTnlNODJZSHItZU84QmhMY0VaY2V0QUZWU2doTmxkcFpMWnZQSGgtbm5oeXQ2cGl5cjhXV1ZLb21seWZlWEIzdkstOUYwVS0zZlotWTQ3Z21MTmFaTWdnVU5fel8xaVNUU19aUnBUbWxoRVc0Q1BmdWdzOVNEaEsxY2xfS0ZmU3NpMkh0Q0pEelJsLV9XUlpmR0U3WlRSN2pKM1lCQ2xYOWNRYkRFdDRiX1JkeXNzVnZCbk1mR0NtM3NyOHlldVNCNVJZSWdBME55dWZSdHpWNGN6dTdGX2k4Vlo3Mmk3RWRPc3ZPd2pSNm5KUDZTLVBoOFlKZFR3eGMyam9sWXJ6VjlmS1ZBOTVoQWlOWktUWjZONGhkQzFmS29aMHNHZkEyZVJJUTR0S01CWkJvcXV3MWxfbjBEeHZtRnRCRmFTYjE0TW9ZdUVRYnZodUFwUEtqNFVlTmUzVC15blVHWTVZOW5aQzZKVFFnbkJ0SU9wbjh3azNoLXlIVzBhR0doYzdQUnVKN19wWjBvN29UemtzNE9LbWV2Tmg1TEFvT1NGWlBoZUY5UVA4b3ZrZEp5OXBfVDJLVjVXWnNEZk0zSVlHZlpsMTZub0FfOHhTcENWUkl6TXBoSEpZR2tJcXI2c2VnNTN1NWdvWkp5UThiMGVkRkpPelRzNUNrcWpvWDVTT2xZTmVoWU9LcDBzSHk2Q1BzdEVPWEl1SW5OMGJOOFRJNWhzcXY1cDloZFBBVDRNSDc4dVIyMmx0aUFyMFVVVEY3T1BRWWhzcE5pbVlvcmlfLURlSnBvUUhTLS14TW5kN0NCekRtUFRmcERnTVIzc09ScktnbktpSkkzTWlCaUV0T2V1Qm1ENnZuVURNR1N2WlBLVG1xTkNCNi1tUVRZTFpsY29ZU09FOV96dm9TeUdYLTJuZ2dON2pCT0ZiZ1ZzelRRMjVrd1RNTXJmbnhpSGE1MklxOC1tbVlUQk9lLTBoSXhISGFSSTdueUpLQlNVZVVhOVczUU8zREFuMGdsc3ZraHVHTXdfdjFUbWJOWEl3WWxMWUVZcld4Z3JqYzh0OXdsRGdSODRVek9VMGZoRERlUjBKdGt5Zm9GQk4wZFBfaW1wUHkxakwweVhvX0VVbVAtSWFQa3FWY0lVenc4aHR5VTFKbFI1ZXdxYU90Nkl1V01mYzBfNnk1a2lDOUh1ZkdYTlhGT1k5X25USTF2WDYtZjlXck9DNmVUamoxTS01ZmRDd1dnbm5TZUJtOUpuT3F2WEJEdWVIX3NqVllia2h4akdXMVRsRVVyS3h4eGZXRXhQaUtUWjlyblV2UW5wYzZxUVdpVG4xd2VQTGEyVkE4bGo5WGRXemxUdzlUcG9aT2pCNHM3Vk1NVDB0eEcxckRVOG5rcjNZRDFSRmJJR1BOMUdyNVZEZXJuZzU1VnFZbjZaZk9JbDhRQnBoUllnX2VhRGg0RVlsX0EzQ2l5M0FFWXVDRTF4N1ZBR09sdk1WX3pKcmlzaVJ5bDR6TjllaVEyVFFHN3NpdllZbnlKemFxSkNVcXBvdFRjc0I5OHVoMTRVa0F5RV9md0FmMHE5WTgzeExSZGp2SXJ0YV9nVm5lU0szblJQRlRaTk9OM0dfQkVQaUtHRVR1UTJmekRQR0pWeF9ld3AxLUdoS0tzLU9Eb2E0bndvWWpjbnN5aS1PcExRU05kSnRRUDNtLTBfcjQyR0o4ZGMtc3NUck5HNGMxOUNweFpiMG1uODlaMVpDdFRnczJrc0x6S0tBRUNsVzBsdmRMVG10YVJTQmlXbDdWTGNQdlNlanNoSV9tMXZ0cmFRdGdZdmJSQ2tFZFZETWxwS0Fad2FzTURQOVl5cXZNSjNWQnBrNUliMDNPSk9WeURpMGxWaVlvUThaZ2NBZnlTVE9WWG5ySVZkYk1HcHNGNHVaekRFRDJWTzJYY0pqQU9HSWtXdnNXNmdDbkp1VWJUa0lRZzRoYkw5V1RjUk0wS1UydV9hYU1NWUhlVXE1cGhwRHVSYzBQUXVMMzdGOG5lYzRFX0U0OHJ2TFhHanRMdDJudnZBT0hENGJkUjluOXc0SHFORmgtbGVla0x6UFl3LU5qT3Z4d1N0d21zVVNJUFRMS1NUU2Y5Y2FCZ3dibEItanN5VUZFN3FlTlNDS2I2aXE3WnI5VE03NllJY1pfTmlhNVNscG1icXMxQTlEakRxQS0xM1hLa2lUb1UxbHRfNmJFSm1lM3ppdFh4TjNXckpXcWRuVUJRS1dGd0JzU3J4Mmd1eW56TnhUUTBPeU1mTlUwdHNvcjB3VC1OaW15ZlE3V0lWWHE5WnZadTFaRmVHaWMxaEN4UDhaNUx5NDBLZ1ZNVlZua3VUM0xNNWYwWktJeEZhWkpsajgxMGVnV0FzRnRiajNkMExrWFgxanVjYmk5d3hWcGNwNjJNR0tEQ0c0bnQ4UUVTTDloR21TYUs5cy0wT01fX01RWVNwc1ZmUENCYWFCODc5LXVVbFNoZ3ZRcjRTc3NrWk13VFdCalU2NGtzbHMtcFdyUWFsTmMyY3JDejJWbnVRdlBuSUxrVHFYTDJlam1JbjZLYm56Q096Ym8tWmpBc21sTF85RkZNMWlEOHJLY3EwZGVEZXhEYWV4N0pvU2tWWWJTUjg3RHFNOEpDaENXaDBWNV9YdEp3OC03VXIxLWtFQm5PZ3FDM1ItUjNOZlY4bDJqZU9RTHJHZDJlS21XZ2JsRlBNMWItY0RqVkxGNmhDbHpUTVBWUG83U2xpN29VNFA5U0pBVFpXOGxBU2x4andiTTg1X3h5TC05aXdYaXVrb0ZCaU5OWncyMGRwWUZhU3NhVDdUYlFlVTh1bjFIQ1JmM2RrZUJCbDR2dlNlT0hLNF93UnRnY2I2eWptcGV2VDV0aWdodXJEeFE4WE1qeUh4U1kyM09ZU1ZpNklzeFBrSWdSdnpNa2ttUUQ2NzlobXFaSnoyd2p4TlZIZndiN1AtS2JIcDgyeGlrdmVuUFFwd2pZM2tRRWllalczXzcyT1hrQXR5eDFaT0tQNVRmS2tJTTQycXdzNF9nNjZDdnBlQk5wN3R0TnkwTXh3cUlSeXp1VGFrYURFVUZoVE1KTUtNNTljak9DLWZmZ2dwNmRCV1hlR2VEaGFPNGdELVh6UjM1cXpTb0sya3E2a3ZlMEJ5eE1wV0QzMkM4bXBwN3BBQmNLNXdVRHRXTk9vanpGQmhvcHBrdTV0NE52NUhuX29tNXBsOTBhaC0wWkhhWjg2akpsN3ZLSVNDTHdqRUVaakJOVTN0N18tbS1ZbEZoWXNoZS1NaU42Um94T0hQLU4xWmxlLURtTGkydjB0WllscDh4ZlNVMzJYeXdhTjJrTktobFhMZUJuREEyM2Q2dFg2WGl5ejU1LXh5RXNLUzY5Zm5XZnhYWXVkZ0I2WHQ2bVhCbXRZN1pTVklvbFpkQ3FIeGVuRHc1MVJrZHY4bmRMb2xXVGpMUUFwWE5yWTU2WnoxQnpQVzYtRFc0bnZ1UWYxQjl0LTRXQ3RXYXRCWkd6OW45WDdwUUhrLVRWUHNEV2sxVlFqMEF1bmdoTEhvUGI2SW95V1dHZHlFWjVWMWRuM1ZmaDFVSUJYN2plc2JEcGxzMTg4cFFtUFdRcHZfNlZ6OVJHZUpkbWhBemF6eTd6WGpDM1MxWDNtMlFES3c0SGNhNklOVGVtcjZhV3VCLTZkR0k2TjhMeDZFMGJXZUZlTmY4bjVLSHdOSVpQZnBVanJkMDBMeGg5Slp5NmtvVnVjY3IxS3ZUQ0UtTWd6RlRXMktOZERSTjZhX2NDRGlyeUg2eVMwaTZ5VTdQR2wyb2w1M2l4VDF5UzVkRER5bk1Fcld2U1J4YktTdjJtaEh0N3VOYzBJemlYNzNNRm85ejNNYXpCTkp4dFV2YWJ3Z2dZYkFwQWtHajBvcHFzelZpbW96Z2pzWW1ZTDNhWVU1MlRwTFBORS1aMVNoblk2XzUyX0FXSmtSZ2pGckpyVU53LXpuSkxtOVlmYzU5b2FQaEtaZy1JYkFHci1nOEFjMUU0dmRMYUlESUJKSHNPeFpvaEFaaWFrX3N1ZV8wQjhDVktCU2R5RjJucVBGZTZRbEhYQmdSbGxpQmRlNVBmMjZBSDFIODF2LUFQMzkwQk1tLWVZNHo1Q0g5SXlGMVpkbWpqNnRsdXFKSW5mblFQZUc1UC1sMHlKMk0xa2xZQUhkeGlVb0Q2Qk11R2x4M0VSLVExNTEtb3BTcGJOcG1VVUp6dTBMVzJTN1JYOERoSjI0NmRQZVVFOWM2Q0hobTNEU3JjZnFYMnF6WjFuNlJEVTdPeE51ZzNHYVQ0YjhBUENoQ3JBYkFSNUdGQncxZzlMUklIcHBOcHpySHhqMkZud1U5Yk9MbFdJNFJxd2tDaThaWkxLY05HRHU5M2JQY01KUnJXSmVUd1BEYnZWX0poRWI3YTdjLXFKeWtXZUYzVWNrZjhKWVczWXN2Y3pXUW5JLUpHRnpEdEhPbW9ZWHRsNndmaXNyYkRuR2R4U1hpc0xIbXdmUGtFNUJvTG9ZSGNBTEVRMlNfUUpoMUgtNmpLaV9WWW9FRnEzcnZtLVJreTVQS0FKcHQxMjJaRV8wLUJPSHhfSzkxTXlfWXdTVUd2Q0FjLUZObHlsUHRLUXhhNl9yNTdTTEJ5OGw2V0NGUnY1LVBFV0xIbHFHSnJSalN3VmFZZDdYR3RmX3dHX2s0bjZYdmNDdWxvQ2N4dTdZdXpnV0ZtWFgybVUxdERGc3lTckVOMFZkOEoxWGJJZ1ZyZG1NaDhWY1hINkRKQzNER0VhS1F3LU1tMFFmdk9ncVBVMGsxQlBvcnBpUHM2RVV1NnN5YmNmZmJ5Yms2TzZnUzMyaWNabGlwM2VWZ1lUTWpVWXBlRTFRU3BXeG02MzlMSVBvQVU4NVhzY3JfWk9scGdKa0hyajAwZ2lhQTh5b2d1S1RBTkdFUjlBanpjY1l4ZFROUzIwZGVrMFVGLVFSV2licXhBSW8zS1hmM0xicXhJaUc1ejBzd2VsaDdhd2FINjZNNThYNEFHVFMwNEN4UFg0blpubHRYdnJVaWVvdHNTQTBUVk1ZcTZtMkhJaW1JVUtBTEdMV1JUdVl4Xy00ejRSbDFoSllYc3piTEJna1p2QnBZRVZvRFVqSnJtYU5kWEFIN2dWYkt5U0d5T0FUcEoxajdlTEdZSmpfb2RUOElZNnNaQ09yVmFHMm1HOU1QM25mOVlQcW1oMzhkbGx3Vk53WFlvRExuUXN1cURnbUV6b3g2RVU3aFJPZXpuTzZGWlNSdUVtQVktU2RhY0t5TTBKbnBRSktQUE1YbjFGTDdXN1ltc28tTHF5ay13a1N4S2pkWUxqa0U2YkZFTFgwOTNzbmVqQmlGajlUR2FYRkZYeE5Jc01VWVcwUDhZT2Y5YjRvdlVVWVB6Y0ZpTTZQS0N2UG52UGJSVnpmZFdhVHEzVnFoY3FvQmRpYzZ1b1JuN29KVmtWUnhjSndXbnZOY25nTWZlaWEyR0F4TERIYWJUZ1JKcmNGeWtsSTN0UUhiejBQS3R2ZEZoQW5NcDVsd1pqcmZ2c2NCblJqTmZuRURxYjFHWnFhNVlxQlEyVUk4ZVREc055dE9IX21TWkVfZ3hHcDBwaFZ4QjhXNXZUcE1mc2hpdkg0MkdoV3VxX0p6N3ZlQWF1SjNwVGo4RmgydV8zb1FZdmtKdFNmZ0NKcWJCeUUtNk1HMUpfUnEwZ2VDRnZEamtuc212d3B1amJwYkNhdG1KMDhPNVE5UGRfdjdSR2gtLVlCYVA4YXpfWl9VckdWWHFwa3BmdHVuRnRVXzN6MzNiZW1wTVAxaVdsOEJGSFBKUkpocXBfOXE3T3g2MEJmY0VQWUVIRGlVYTFjMUpuVEk4N0FGdmR0SDM3S2c2UkxaQmpmeHRScV90V0dWMWNSSG1oREV5N0RkcDkwaTRGMndIeVMxQjA1Ym0tVVQ2RGpNcVJYeXh3c25pR3ZQdmc1RUs4bUdlS3JOUVJSQjB2Tm1MNUV4MjVJaC1KLWlfSkpKZkxFUGEzSWtVYktzdW1wakQ3WnFyNGgtWjA2NzU2c0pvS0dxNmp3eF9KMjM5b0x1a05CMnFScXRiUWk0SmNfWW1oZFhnWUZTRThURW9uWFMzWjZLdThPc0ZudzE3VUpFa0lyZ0tGcVllWl9FaUxtOEtPckZ0YnRTZDFDMWV3MktLZ1picHhpa2FBZDRBa1ZhU0ZabWJIZzJVN2FlNGxIVXBETVMzYmpjSk96UFkyY1d5TzFlaGF1Ymc9PQ==)
                DEV_CERTIFICATE_PASSWORD: Encrypted(Z0FBQUFBQmY1S1VvRG8zRnZqR3BjTmlGemNrMDdpSjljOHhrTlNnbHV2WjNIVkhtY21ZSU5jTS1wZElLcm03eWNESEFVVHFtck5meTVMS0EtMG1YX085WGk4UmIwLVdfYlE9PQ==)
            xcode: latest
            cocoapods: default
        cache:
            cache_paths:
              - $HOME/Library/Caches/CocoaPods
        triggering:
          events:
            - push
          branch_patterns:
            - pattern: '*main*'
              include: true
              source: true
          cancel_previous_builds: false
        scripts:
            - name: Install cocoapods
              script: pod install
            - name: Set up keychain to be used for codesigning using Codemagic CLI 'keychain' command
              script: keychain initialize
            - name: Set up development certificate
              script: |
                echo $DEV_CERTIFICATE | base64 --decode > /tmp/dev_certificate.p12
                keychain add-certificates --certificate /tmp/dev_certificate.p12 --certificate-password $DEV_CERTIFICATE_PASSWORD
            - name: Set up code signing settings on Xcode project
              script: xcode-project use-profiles
            - name: Make an archive
              script: xcodebuild archive -workspace "$XCODE_WORKSPACE" -scheme "$XCODE_SCHEME" -archivePath unsigned.xcarchive -configuration Release
        artifacts:
            - $HOME/Library/Developer/Xcode/Archives/**/*.xcarchive
            - $HOME/Library/Developer/Xcode/DerivedData/**/Build/**/*.app
            - $HOME/Library/Developer/Xcode/DerivedData/**/Build/**/*.dSYM

